<html>
<head></head>
<body>
	<div>
		<canvas id="canvas" tabindex="1" width="800" height="100"></canvas>
	</div>
	<script src="axe.js"></script>
	<script src="point.js"></script>
	<script src="rectangle.js"></script>
	<script src="canvas.js"></script>
	<script src="actor.js"></script>
	<script src="game.js"></script>
	<script>

	var Stopped = { 
		mouseDown: function(self, value) {
			value.selected = !value.selected;
		},
		keyPress: function(self, value, keyCode){
			if(value.selected && keyCode === 37) {
				value.x -= 50
				self.become(Moving)
			}
		}
	}

	var Moving = Object.create(Stopped)
	Moving.update = function(self, value, dt) {
		value.x += 100 * dt 
	};
	Moving.collide = function(self, value){
		self.become(Stopped)
	}

	var Square = {
		value: {
			x: 0, 
			selected: false
		},
		behaviour: Moving,
		render: function(value, bound, canvas) {
			canvas.drawRectangle(bound, value.selected ? '#0ED600' : '#8ED6FF');
		},
		bound: function(value) {
			return new Rectangle(value.x, 0, 100, 100)
		}
	};

	var Wall = {
		value: {
			hitted: false, 
		},
		behaviour: {
			resume: function(self, value){
				value.hitted = false;
			},
			collide: function(self, value) {
				value.hitted = true;
			}
		},
		render: function(value, bound, canvas) {
			canvas.drawRectangle(bound, value.hitted ? '#FF2020' : null);
		},
		bound: function(value) {
			return new Rectangle(400, 0, 10, 180)
		}
	};

	var canvas1 = new Canvas('canvas');
	var game = new Game(0.01, canvas1);
	game.createActor(Square)
	game.createActor(Wall)
	game.run();
	//entity: actor(id + state + behaviour) + bounding + visual rendering 
	</script>
</body>
</html>
