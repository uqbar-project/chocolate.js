<html>
<head></head>
<body>
	<div>
		<canvas id="canvas" tabindex="1" width="800" height="100"></canvas>
	</div>
	<script src="axe.js"></script>
	<script src="point.js"></script>
	<script src="rectangle.js"></script>
	<script src="canvas.js"></script>
	<script src="actor.js"></script>
	<script src="game.js"></script>
	<script>
	var Square = {
		x: 0, 
		selected: false,
		states: {
			Moving: { 
				update: function(t) {
					this.x += 50 * t;
				}
			}, 
			Stopped: {
				update: function(t) {}
			}
		},
		update: function(t) {
			this.state = this.state || this.states.Moving;
			this.state.update.call(this, t); 
		},
		mouseDown: function() {
			this.selected = !this.selected;
		},
		keyPress: function(keyCode){
			if(this.selected && keyCode === 37) this.x -= 50
		},
		collide: function()	{
			this.state = this.states.Stopped;
		},
		render: function(canvas) {
			canvas.drawRectangle(this.bound, this.selected ? '#0ED600' : '#8ED6FF');
		},
		get bound() {
			return new Rectangle(this.x, 0, 100, 100)
		}
	};

	var Wall = { 
		hitted: false, 
		render: function(canvas) {
			canvas.drawRectangle(this.bound, this.hitted ? '#FF2020' : null);
		},
		collide: function() {
			this.hitted = true;
		},
		get bound() {
			return new Rectangle(400, 0, 10, 180)
		}
	};

	var canvas1 = new Canvas('canvas');
	var game = new Game(0.1, canvas1);
	game.createActor(Square)
	game.createActor(Wall)
	game.run();
	//entity: actor(id + state + behaviour) + bounding + visual rendering 
	</script>
</body>
</html>
